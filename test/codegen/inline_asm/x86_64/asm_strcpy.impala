extern "C" {
    fn println(&[u8]) -> ();
}

fn main() -> int {
    let mut str1 = "Come on, copy me!\n";
    let mut str2 = "Don't overwrite me";
    strcpy(&str2, &str1, 19u32);

    println(&str2);
    0
}

fn strcpy(dst: &[u8], src: &[u8], count: u32) -> () {
    asm("cld;"
        "rep;"
        "movsb;"
        : /* no input */
        : "{si}"(src), "{di}"(dst), "{cx}"(count)
    );
}
