fn main() -> int {
    let mut str1 = "Come on, copy me!";
    let mut str2 = "Don't overwrite me";
    strcpy(&str2, &str1, 18u32);

    let mut i = -1;
    while (++i < 18) {
        if (str1(i) != str2(i)) {
            return(1)
        }
    }
    0
}

fn strcpy(dst: &[u8], src: &[u8], count: u32) -> () {
    asm("cld; rep; movsb;"
        : /* no input */
        : "{si}"(src), "{di}"(dst), "{cx}"(count)
    );
}
